@use 'abstracts/variables' as *;
@use 'abstracts/mixins' as *;

:root {
	font-size: 18px;
	line-height: 1.5;

	--font-weight-normal: 500;
	--font-weight-semibold: 625;
	--font-weight-bold: 781;
	--font-weight-black: 976;

	font-family: 'Recursive', monospace;
	font-weight: var(--font-weight-normal);
	font-display: fallback;

	hanging-punctuation: first allow-end last; // https://chriscoyier.net/2023/11/27/the-hanging-punctuation-property-in-css/

	--ratio: 1.333;
	--s-5: calc(var(--s-4) / var(--ratio));
	--s-4: calc(var(--s-3) / var(--ratio));
	--s-3: calc(var(--s-2) / var(--ratio));
	--s-2: calc(var(--s-1) / var(--ratio));
	--s-1: calc(var(--s0) / var(--ratio));
	--s0: 1rem;
	--s1: calc(var(--s0) * var(--ratio));
	--s2: calc(var(--s1) * var(--ratio));
	--s3: calc(var(--s2) * var(--ratio));
	--s4: calc(var(--s3) * var(--ratio));
	--s5: calc(var(--s4) * var(--ratio));
}

pre {
	@include fontVariations($mono: 1);

	max-width: 100%;
	overflow: auto;
	background: var(--background-tertiary);
	border-radius: 0.5rlh;
	margin-inline: -1lh;
	padding: 1lh;

}

code {
	@include fontVariations($mono: 1);

	max-width: 100%;
	overflow: auto;
	border-radius: 0.5rlh;
	margin-inline: -1lh;
	padding: 1lh;

}

em,
i {
	@include fontVariations($slnt: -15)
}

strong, b {
	font-weight: var(--font-weight-semibold);
}

h1,
h2,
h3,
h4,
h5,
h6 {
	text-wrap: balance;
	font-weight: var(--font-weight-bold);
	@include fontVariations($casl: 0, $slnt: 0, $crsv: 0);
}

h1 {
	font-size: var(--s5);
	line-height: 3lh;
	margin-block: 1rlh;

}

h2 {
	font-size: var(--s3);
	line-height: 2rlh;
	margin-block: 1rlh;
}

h3 {
	font-weight: var(--font-weight-semibold);
	font-size: var(--s2);
	line-height: 2rlh;
	margin-block: 1rlh;
}

h4 {
	font-weight: var(--font-weight-bold);
	font-size: var(--s1);
	line-height: 1rlh;
	margin-block: 1rlh;
}

h5 {
	font-weight: var(--font-weight-semibold);
	font-size: var(--s0);
	line-height: 1rlh;
	margin-block: 1rlh;
}


h6 {
	font-weight: var(--font-weight-normal);
	font-size: var(--s0);
	line-height: 1rlh;
	margin-block: 1rlh;
}

small,
sub,
sup {
	// TOOD: Relace with contextual alternates.
	font-size: 0.875em;
}

sub,
sup {
	position: relative;
	line-height: 0;
}

small {
	font-size: var(--s-1);
}

dl {
	margin-block: 1lh;
}

dt {
	font-weight: var(--font-weight-semibold);
}

dd {
	margin-inline-start: 1lh;
}

// Hang top-level ordered and unordered lists. https://markboulton.co.uk/journal/five-simple-steps-to-better-typography-part-2/
*:not(li)>ul,
*:not(li)>ol {
	padding: 0;
	list-style-position: outside;
}

address {
	font-style: inherit;
}

blockquote {
	padding-block: 1lh;
	padding-inline: 1lh;

	// Remove top margin for the first paragraph and bottom margin for the last
	p {
		font-weight: var(--font-weight-semibold);

		&:first-child {
			margin-top: 0;
		}

		&:last-child {
			margin-bottom: 0;
		}
	}

	margin-inline: -1rlh;
	border-left: var(--border-thickness) solid;
}

hr {
	margin: 2rlh;
	/* Specifies the thickness of the hr */
	height: var(--border-thickness);
	/* Removes the default border */
	border: none;
}

details {

	summary {
		list-style: none; // Hide default list marker
		cursor: pointer;
		position: relative; // Establishes position context for pseudo-element

		&::-webkit-details-marker {
			display: none; // Hide default arrow in browsers like Chrome or Safari
		}

		&::before {
			margin-left: -1lh;
			content: '';
			position: absolute;
			width: 1lh;
			height: 1lh;
			mask-image: url('data:image/svg+xml;charset=UTF-8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon"><path fill-rule="evenodd" d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"/></svg>'); // Heroicons: chevron mini
		}

		time {
			font-variant-numeric: tabular-nums;
			margin-inline-end: 1rlh;
		}
	}

	&[open] {
		margin-block-end: 1rlh;
	}

	&[open] summary::before {
		transform: rotate(90deg); // Rotate icon when details are open
	}
}